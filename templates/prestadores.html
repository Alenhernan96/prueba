<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />

    <title>Tecno CF - Buscador de Prestadores</title>

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/estilo.css') }}"
    />
    <link
      rel="icon"
      href="{{ url_for('static', filename='img/favicon.ico') }}"
      type="image/x-icon"
    />

    <!-- gtag opcional (igual que en tus otras p√°ginas) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-VJDF2QPWBP"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-VJDF2QPWBP");
    </script>
  </head>
  <body>
    {% include 'header.html' %}
    <section id="prestadores-root" class="prestadores">
      <div class="requerimientos-container container-glow">
        <h2 class="text-center mb-4">üè¢ Buscador de Prestadores</h2>

        <div class="ayuda-centro">
          <button
            id="prestadores-help-open"
            class="requerimientos-boton"
            style="max-width: 300px"
          >
            ‚ÑπÔ∏è ¬øC√≥mo funciona el buscador?
          </button>
        </div>

        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %}
        <div class="mt-3">
          {% for category, message in messages %}
          <div class="alert alert-{{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
        {% endif %} {% endwith %}

        <div class="prestadores-row">
          <div class="prestadores-field">
            <label for="prestadores-obra">Obra Social</label>
            <select id="prestadores-obra" class="prestadores-input">
              {% for o in obras %}
              <option value="{{o}}">{{o}}</option>
              {% endfor %}
            </select>
          </div>

          <div class="prestadores-field">
            <label for="prestadores-q">Buscar por prestador o matr√≠cula</label>
            <input
              id="prestadores-q"
              class="prestadores-input"
              placeholder="Ej.: 'Dra P√©rez' o '35369'..."
            />
          </div>

          <div class="prestadores-actions">
            <button id="prestadores-search" class="requerimientos-boton">
              Buscar
            </button>
          </div>
        </div>

        <p class="prestadores-muted">
          <span id="prestadores-total" class="prestadores-count"
            >0 resultados</span
          >
        </p>

        <div class="prestadores-table-wrap">
          <table class="prestadores-table">
            <thead>
              <tr>
                <th>Prestador</th>
                <th>Matr√≠cula</th>
              </tr>
            </thead>
            <tbody id="prestadores-tbody">
              <tr>
                <td class="prestadores-nores" colspan="2">Sin resultados</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Modal de ayuda -->
    <div id="prestadores-help" class="modal-ayuda">
      <div class="modal-ayuda-contenido">
        <span class="modal-ayuda-cerrar" id="prestadores-help-close"
          >&times;</span
        >
        <h3>¬øC√≥mo usar el Buscador?</h3>
        <p>1) Eleg√≠ una <strong>obra social</strong> del listado.</p>
        <p>
          2) Escrib√≠ <strong>parte del nombre</strong> o la
          <strong>matr√≠cula</strong>.
        </p>
        <p>
          3) Si ingres√°s un n√∫mero de <b>3+ d√≠gitos</b>, se busca como matr√≠cula
          en todo el registro.
        </p>
        <p>
          4) La b√∫squeda ignora acentos y encuentra coincidencias por palabras.
        </p>
      </div>
    </div>

    <button
      type="button"
      class="boton-flotante"
      data-bs-toggle="modal"
      data-bs-target="#modalSugerencia"
    >
      <span style="color: #b56fff">‚ûï</span>
    </button>

    <div
      class="modal fade"
      id="modalSugerencia"
      tabindex="-1"
      aria-labelledby="modalSugerenciaLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content bg-dark text-white">
          <div class="modal-header">
            <h5 class="modal-title" id="modalSugerenciaLabel">
              ¬øQuer√©s agregar un listado de prestadores?
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Cerrar"
            ></button>
          </div>
          <div class="modal-body">
            <p>
              Complet√° el siguiente formulario y nos llegar√° autom√°ticamente:
            </p>
            <form
              action="/enviar-sugerencia"
              method="POST"
              enctype="multipart/form-data"
              class="requerimientos-form"
            >
              <div class="mb-3">
                <label for="tipo" class="requerimientos-label"
                  >Tipo de sugerencia:</label
                >
                <select
                  id="tipo"
                  name="tipo"
                  class="requerimientos-input"
                  required
                >
                  <option value="">-- Seleccionar --</option>
                  <option value="obra_social">Obra Social sugerida</option>
                  <option value="prestador">Prestador sugerido</option>
                </select>
              </div>

              <div class="mb-3">
                <label for="nombre" class="requerimientos-label">Nombre:</label>
                <input
                  type="text"
                  id="nombre"
                  name="nombre"
                  class="requerimientos-input"
                  required
                />
              </div>

              <div class="mb-3">
                <label for="email" class="requerimientos-label">Email:</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="requerimientos-input"
                  required
                />
              </div>

              <div class="mb-3">
                <label for="obra" class="requerimientos-label">Detalle:</label>
                <input
                  type="text"
                  id="obra"
                  name="obra"
                  class="requerimientos-input"
                  required
                />
              </div>

              <div class="mb-3">
                <label for="archivo" class="requerimientos-label"
                  >Adjuntar archivos (opcional):</label
                >
                <input
                  type="file"
                  id="archivo"
                  name="archivo"
                  class="requerimientos-input"
                  accept="
        application/pdf,
        application/vnd.ms-excel,
        application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,
        application/msword,
        application/vnd.openxmlformats-officedocument.wordprocessingml.document,
        .pdf,.xls,.xlsx,.doc,.docx
      "
                  multiple
                />
              </div>

              <button type="submit" class="requerimientos-boton">
                Enviar sugerencia
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    {% include 'footer.html' %}
  </body>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</html>
